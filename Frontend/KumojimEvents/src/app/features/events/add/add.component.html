<div class="container">
  @if(success){
      <div class="alert alert-success" role="alert">
        Yes, Event Added
      </div>
  }
  @if(!success && submitted){
    <div class="alert alert-danger" role="alert">
      Nop, try again!!
    </div>
  }
  <form [formGroup]="eventForm" (ngSubmit)="onSubmit()">
    <div class="row">
      <div class="form-group col-md-6 mb-3">
        <label for="TimeZone">TimeZone: </label>
        <select class="form-control" id="TimeZone" formControlName="TimeZone">
          <option value="">Select Event Timezone</option>
          <option *ngFor="let tz of timezonesList" [ngValue]="tz.utc">
            {{ tz.name }} - {{ tz.zone }} ({{ tz.utc }})
          </option>
        </select>
        @if (submitted && f['TimeZone'].errors) {
        <div class="invalid-feedback">
          @if (f['TimeZone'].errors['required']) {
          <div>TimeZone is required</div>
          }
        </div>
        }
      </div>
    </div>
    <div class="row">
      <div class="form-group col-md-6 mb-3">
        <label for="Name">Name: </label>
        <input
          id="Name"
          class="form-control"
          type="text"
          formControlName="Name"
          [ngClass]="{ 'is-invalid': submitted && f['Name'].errors }"
        />
        @if (submitted && f['Name'].errors) {
        <div class="invalid-feedback">
          @if (f['Name'].errors['required']) {
          <div>Name is required</div>
          } @if (f['Name'].errors['maxlength']) {
          <div>Name must be less than 32 caracters</div>
          }
        </div>
        }
      </div>

      <div class="form-group col-md-6 mb-3">
        <label for="Description">Description: </label>
        <input
          id="Description"
          class="form-control"
          type="text"
          formControlName="Description"
          [ngClass]="{ 'is-invalid': submitted && f['Description'].errors }"
        />
        @if (submitted && f['Description'].errors) {
        <div class="invalid-feedback">
          @if (f['Description'].errors['required']) {
          <div>Description is required</div>
          }
        </div>
        }
      </div>
    </div>
    <div class="row">
      <div class="form-group col-md-6 mb-3">
        <label for="Location">Location: </label>
        <input
          id="Location"
          class="form-control"
          type="text"
          formControlName="Location"
          [ngClass]="{ 'is-invalid': submitted && f['Location'].errors }"
        />
        @if (submitted && f['Location'].errors) {
        <div class="invalid-feedback">
          @if (f['Location'].errors['required']) {
          <div>Location is required</div>
          }
        </div>
        }
      </div>

      <div class="form-group col-md-6 mb-3">
        <label for="Program">Program: </label>
        <textarea
          id="Program"
          class="form-control"
          type="textarea"
          formControlName="Program"
          [ngClass]="{ 'is-invalid': submitted && f['Program'].errors }"
        ></textarea>
        @if (submitted && f['Program'].errors) {
        <div class="invalid-feedback">
          @if (f['Program'].errors['required']) {
          <div>Program is required</div>
          }
        </div>
        }
      </div>
    </div>

    <div class="row">
      
      <div class="form-group col-md-6 mb-3">
        <label for="StartDate">StartDate: </label>
        <mtx-datetimepicker #datetimePicker
                      [type]="type"
                      [mode]="mode"
                      [multiYearSelector]="multiYearSelector"
                      [startView]="startView"
                      [twelvehour]="twelvehour"
                      [timeInterval]="timeInterval"
                      [touchUi]="touchUi"
                      [timeInput]="timeInput"></mtx-datetimepicker>
        <input
          id="StartDate"
          class="form-control"
          type="text"
          formControlName="StartDate"
          [ngClass]="{ 'is-invalid': submitted && f['StartDate'].errors }"
          [mtxDatetimepicker]="datetimePicker"
        />
        <mtx-datetimepicker-toggle [for]="datetimePicker" matSuffix></mtx-datetimepicker-toggle>
        @if (submitted && f['StartDate'].errors) {
        <div class="invalid-feedback">
          @if (f['StartDate'].errors['required']) {
          <div>StartDate is required</div>
          }
        </div>
        }
      </div>

      <div class="form-group col-md-6 mb-3">
        <label for="EndDate">EndDate: </label>
        <mtx-datetimepicker #datetimePicker1
                      [type]="type"
                      [mode]="mode"
                      [multiYearSelector]="multiYearSelector"
                      [startView]="startView"
                      [twelvehour]="twelvehour"
                      [timeInterval]="timeInterval"
                      [touchUi]="touchUi"
                      [timeInput]="timeInput"></mtx-datetimepicker>
        <input
          id="EndDate"
          class="form-control"
          type="text"
          formControlName="EndDate"
          [ngClass]="{ 'is-invalid': submitted && f['EndDate'].errors }"
          [mtxDatetimepicker]="datetimePicker1"
        />
        <mtx-datetimepicker-toggle [for]="datetimePicker1" matSuffix></mtx-datetimepicker-toggle>
        @if (submitted && f['EndDate'].errors) {
        <div class="invalid-feedback">
          @if (f['EndDate'].errors['required']) {
          <div>EndDate is required</div>
          }
        </div>
        }
      </div>
    </div>
    <section>
    <div class="form-group">
      <button type="submit" class="btn btn-primary">Register</button>
      <button
        type="button"
        (click)="onReset()"
        class="btn btn-warning float-right"
      >
        Reset
      </button>
    </div>
  </section>
  </form>
</div>
